---
const STRAPI_URL = "http://localhost:1337";

const res = await fetch(`${STRAPI_URL}/api/products?populate=*`);
if (!res.ok) {
  throw new Error("Failed to fetch products from Strapi");
}
const data = await res.json();
const products = data.data; // In Strapi v4, data is nested under `data`
---

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>All Products</title>
  </head>
  <body>
    <h1>Our Products</h1>
    <ul>
      {
        products.map(
          (item: {
            id: number;
            name?: string;
            description?: string;
            price?: number;
          }) => {
            const { id, name, description, price } = item;
            return (
              <li>
                <h2>{name}</h2>
                <p>{description}</p>
                <p>Price: {price}</p>
                {/* If you have an image field, e.g. attributes.images */}
              </li>
            );
          }
        )
      }
    </ul>
  </body>
</html>
